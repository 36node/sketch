import { Context, Middleware } from "koa";
import Router from "koa-tree-router";

{{#each operations}}
{{#if requestDef}}
{{{requestDef}}};
{{/if}}
{{#if responseDef}}
{{{responseDef}}};
{{/if}}
{{/each}}

declare global {
  {{#each operations}}
  {{#if requestDef}}
  type {{{capitalize name}}}Request = {{{capitalize name}}}Request;
  {{/if}}
  {{#if responseDef}}
  type {{{capitalize name}}}Response = {{{capitalize name}}}Response;
  {{/if}}
  {{/each}}
}

export default class API {
  middleware(operation: string): Array<Middleware>;
  bind(router: Router): API;
  {{#each operations}}
  {{name}}({{#if requestDef}}req: {{capitalize name}}Request, {{/if}}ctx: Context): {{#if responseDef}}Promise<{{capitalize name}}Response>{{else}}void{{/if}};
  {{/each}}
}